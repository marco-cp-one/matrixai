<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Feature Prioritization Matrix</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Updated Google Fonts import for Noto Sans and Jost -->
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@700&family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Updated font families */
        body {
            font-family: 'Noto Sans', sans-serif;
        }
        h1 {
            font-family: 'Jost', sans-serif;
        }

        /* Styles for the new Modal */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.5); /* Dim background */
            /* Flex to center the modal content */
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            max-height: 80vh; /* Make content scrollable */
            overflow-y: auto;
        }
        .modal-open {
            display: flex; /* Show the modal */
        }
        
        /* Styles for Impact/Complexity Matrix Tooltip (View 1) */
        .matrix-tile .tooltip-bubble {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .matrix-tile:hover .tooltip-bubble {
            visibility: visible;
            opacity: 1;
        }

        /* CSS for feature list tooltip (View 2) */
        .feature-item {
            position: relative;
            cursor: default;
            /* Fixes issue where 'li' marker is outside */
            list-style-position: inside; 
        }

        /* Class for the text content */
        .feature-text {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 100%;
            /* Use inline-block to allow truncation and stay on same line as bullet */
            display: inline-block; 
            /* Align with bullet */
            vertical-align: top;
            /* Prevent text from wrapping under bullet */
            width: calc(100% - 1.5em); /* Adjust width to account for bullet */
        }
        
        .feature-item .feature-tooltip {
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.2s;
            position: absolute;
            left: 50%;
            bottom: 125%; /* Position above the text */
            transform: translateX(-50%);
            z-index: 10;
            
            background-color: #1e293b; /* bg-slate-800 */
            color: white;
            padding: 0.5rem 0.75rem; /* p-2 px-3 */
            border-radius: 0.5rem; /* rounded-lg */
            font-size: 0.875rem; /* text-sm */
            font-weight: 500; /* medium */
            width: 300px;
            max-width: 90vw;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            
            /* Allow text to wrap inside the tooltip */
            white-space: normal;
            line-height: 1.4;
        }
        
        .feature-item:hover .feature-tooltip {
            visibility: visible;
            opacity: 1;
        }

    </style>
</head>
<body class="bg-slate-50 p-4 md:p-8">

    <main class="max-w-7xl mx-auto">
        <h1 class="text-3xl font-bold text-slate-800 mb-2">AI Feature Prioritization Matrix</h1>
        <p class="text-lg text-slate-600 mb-8">Visual matrix and feature list grouped by macro solution.</p>

        <!-- --- View 1: The 3x3 Impact vs Complexity Matrix --- -->
        <div id="matrix-view" class="mb-12">
            <h2 class="text-2xl font-bold text-slate-800 mb-4">Impact vs. Complexity Matrix</h2>
            <div class="overflow-x-auto rounded-lg shadow-lg border border-slate-200 bg-white">
                <table class="min-w-full divide-y divide-slate-200">
                    <thead id="impact-matrix-head" class="bg-slate-100">
                        <!-- Header row will be generated by JS -->
                    </thead>
                    <tbody id="impact-matrix-body" class="divide-y divide-slate-200">
                        <!-- Body rows will be generated by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- --- View 2: List by Macro --- -->
         <div id="macro-view">
             <h2 class="text-2xl font-bold text-slate-800 mb-4">Features by Macro Solution</h2>
             <div id="macro-list-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Macro boxes will be generated by JS -->
             </div>
        </div>
    </main>

    <!-- --- Modal HTML (Hidden by default) --- -->
    <div id="feature-modal" class="modal">
        <div class="modal-content bg-white w-full max-w-2xl p-6 rounded-lg shadow-xl m-4">
            <!-- Modal Header -->
            <div class="flex items-center justify-between pb-3 border-b border-slate-200">
                <h3 id="modal-title" class="text-xl font-bold text-slate-800">Category Features</h3>
                <button id="modal-close-btn" class="text-slate-500 hover:text-slate-800 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <!-- Modal Body (Scrollable List) -->
            <div class="mt-4 max-h-[60vh] overflow-y-auto pr-2">
                <ul id="modal-list" class="space-y-4">
                    <!-- Features will be populated by JS -->
                </ul>
            </div>
        </div>
    </div>


    <script>
        // --- Full Raw Data (TSV Format) ---
        // This now includes the full description (Description) and the short title (Title)
        const rawData = `Description	Title	Macro	Impact	Complexity	Prioritization
"Automatically group/consolidate similar tender clarifications requests to consolidate responses and automatically publish clarification responses. Automatically suggest relevant responses to supplier clarifications, based on tender details to assist Procurement Officials"	Tender Clarification and Response Automation	Agentic AI & Workflow Automation	Medium	Low	High
"Automatically determines the appropriate procurement procedure (detection of tresholds, understanding of procurement strategy), generates necessary documents and routes requests to the appropriate systems"	Automated Procurement Procedure Management	Agentic AI & Workflow Automation	Medium	Low	High
"Automate Contract Management tasks such as sending renewal reminders, tracking contract milestones and generating reports on contract performance"	Contract Management Automation	Agentic AI & Workflow Automation	Medium	Low	High
"Automatically generate purchase requisitions based on procurement plans information/data  Consolidate demand at various levels (UNSPSC level, location level, category level, project level)"	Procurement Plan Optimization	Agentic AI & Workflow Automation	Low	Low	Medium
"Automatic and systematic time management data collection + automated suggestion to update the deadline (+emailing) if extension"	Automated Time Management and Deadline Updates	Agentic AI & Workflow Automation	Low	Low	Medium
"Automatically record and timestamp minutes of pre-bid meetings, route them for validation to the appropriate review body (Procurement Reviewer according to current policy) and automatically publish/amend the tender accordingly"	Automated Pre-Bid Meeting Management	Agentic AI & Workflow Automation	Low	Low	Medium
"Record automatically minutes of negotiations meetings along with timestamps, auto-upload of minutes into eSourcing, auto-routing of minutes for validation to relevant parties"	Automated Negotiation Meeting Minutes and Routing	Agentic AI & Workflow Automation	Low	Low	Medium
"Automatically generate purchase orders/contracts, auto-populate them with the necessary data and send them automatically to suppliers once approved: - upon award approval based on the information from the sourcing event (incl products, unit prices, payment terms, supplier data, incoterms etc.) - from contract entity based on the information from the contract entity"	Automated Purchase Order/Contract Generation and Dispatch	Agentic AI & Workflow Automation	Medium	Medium	Medium
"Proactive Workflow Management: The AI monitors the performance of running workflows to flag bottlenecks and analyzes historical data to suggest optimizations. The overall approach can also be used for patterns and trends to identify redundant issues in policies"	AI for Proactive Workflow Management	Agentic AI & Workflow Automation	High	High	Medium
"Consistency engine (plug to Form Enginge: NLP semantic analysis of newly generated questionnaires to build a consistency mapping). The idea is to verify reponsdents inputs and verify if there responses are consistent across multiple questions in the same field. Eg: Link the question ""Do you have a formal policy prohibiting child labor?"" (Q5) with ""Do you perform age verification for all new workers?"" (Q12). -> Generated rule: IF response(Q5) == ""Yes"" AND response(Q12) == ""No"" THEN FLAG ""Critical Inconsistency: Child Labor Policy Not Implemented"", this whole framework could also be used to build consistency in workflow engine"	Consistency Engine for Questionnaire Analysis	Compliance & Anomaly Detection Engine	High	Low	Very High
"Anomaly Detection: The AI continuously monitors supplier assessment history and flags anomalies, such as a supplier's score dropping suddenly."	Anomaly Detection in Supplier Assessment	Compliance & Anomaly Detection Engine	Medium	Low	High
"Automated Review & Score Auditing: When a questionnaire is submitted, an AI performs a preliminary audit, flagging answers that seem statistically unusual to guide the human reviewer."	AI for Review and Audit	Compliance & Anomaly Detection Engine	Medium	Low	High
"Analyze CPC submissions to support review by Chairs, learning from previous cases"	CPC Submission Analysis	Compliance & Anomaly Detection Engine	High	Medium	High
"New audit recommendation re. collusion indentification by the system: check for any similarities in the name of person who submitted the bid as ""the person authorised by the bidder"", check for similarities in registerred address, timing of documents uploaded, gramatical errors, price similarities (if too close), similar structure of the documents, same IP address."	Audit Recommendations for Collusion Identification	Compliance & Anomaly Detection Engine	High	Medium	High
"Prior to publication, automatically proofread tenders to identify and flag any non-compliance with formatting standards, procurement policies or other relevant requirements and suggest areas for improvement  Automatically proofread and review award"	Automated Tender Proofreading and Award Review	Compliance & Anomaly Detection Engine	High	Medium	High
"Flag anomalies/outlying bids that deviate significantly from the norm (e.g.: unusually low/high prices, unrealistic timelines, suspicious similarities) that can potentially indicate errors, aggressive pricing, fraud or collusion"	Anomaly Detection in Bids	Compliance & Anomaly Detection Engine	Medium	Medium	Medium
"DRiVE assessment chatbot: Empower supplier with a comprehensive and adaptive chatbot that would fine-tune recommendations for their self-assessment and maybe even help them on clarification or verification documents"	DRiVE Assessment Chatbot	Conversational AI & Support	Medium	Low	High
"Automatically generate a concise summary of the tender on-demand to help suppliers quickly understand the requirements and encourage participation. Enable suppliers to ask questions about the tender and find relevant information within the documents using natural language queries (mimicking pre-bid meeting interactions)"	Tender Summary and Q&A for Suppliers	Conversational AI & Support	Low	Low	Medium
"AI-powered chatbot/assistant to support portal users and answer common questions  Contextual help and guidance: relevant prescriptive content and guidance materials available within UNOPS to prompted at each step of the process"	AI Chatbot and Contextual Help for UNOPS Portal Users	Conversational AI & Support	High	Medium	High
"Provide auto-suggestions for applicable sustainable procurement criteria, based on the existing SP criteria tool"	Sustainable Procurement Criteria Auto-Suggestions	Generative AI Content Assistant	Medium	Low	High
"Assist in drafting complete tender document sections based on high-level inputs (Meeting notes, ERP data, unstructured text entry)"	Tender Document Drafting Support	Generative AI Content Assistant	High	Low	Very High
"Automated Form Enrichment: When creating a new questionnaire, an AI could pre-fill parameters like QuestionConceptID, MaturityLevel, and relevant LinkedSDGTargets by analyzing the question's text."	Automated Form Enrichment with AI	Generative AI Content Assistant	Medium	Low	High
"Support contract drafting (expand upon clauses or write new clauses) and identify issues"	Contract Drafting Support	Generative AI Content Assistant	Medium	Low	High
"Smart SDG Mapping: When a new question is added to a questionnaire, an AI automatically suggests the most relevant PRIMARY and SECONDARY SDGs by analyzing the question's text."	Smart SDG Mapping	Generative AI Content Assistant	Medium	Low	High
"Automatically generate comprehensive evaluation reports that summarize bid evaluation results, scoring and key findings/observations"	Automated Bid Evaluation Reports	Generative AI Content Assistant	High	Low	Very High
"Generate a summary of responses, the comments from reviewers and provide gaps assessment"	Summary, Comments, and Gaps Assessment	Generative AI Content Assistant	Low	Low	Medium
"Guidance Generation: An administrator provides guidance in one language, and the AI automatically generates and translates it into all applicable languages for the questionnaire."	Guidance Generation and Translation	Generative AI Content Assistant	Low	Low	Medium
"Automatically generate debrief reports for unsuccessful suppliers upon request, providing structured feedback on failed criteria (within the limit of information that can be shared/disclosed to bidder)"	Automate Debrief Reports for Unsuccessful Suppliers	Generative AI Content Assistant	Low	Low	Medium
"Automatically generate/create CPC case submissions based on tender and bid data"	Automated CPC case submissions	Generative AI Content Assistant	High	Medium	High
"Provide intelligent suggestions and recommendations for drafting technical specs, TORs, SOWs... based on best practices (guides), industry standards and past procurement. Identify and scan previous/existing tenders from UNGM and eSourcing repository to support drafting of specifications. Relate to impact and outcome."	AI-Powered Procurement Drafting and Sourcing	Generative AI Content Assistant	Medium	Medium	Medium
"Automatically generate purchase requisitions in the ERP from unstructured text data (e.g.: identify and select product code, estimated delivery date or relevant information etc..)"	Automated Purchase Requisition Generation from Unstructured Data	IDP & Data Foundation / Agentic AI & Workflow Automation	Low	Medium	High
"Analyze contract documents to extract key data (such as clauses and obligations, contract terms, renewal dates, pricing clauses, service level agreements..). Monitor supplier performance (invoices, delivery schedules, quality reports) against these obligations and contract compliance, flagging potential breaches or deviations and flagging them accordingly"	Contract Analysis and Supplier Performance Monitoring	IDP & Data Foundation / Compliance & Anomaly Detection Engine	Medium	Low	High
"Automated document verification/Pre processing: Policies, training materials, contracts etc.. Could be automatically processed within an AI workflow so they would be automatically flagged for inconsistency, to extract records of review, expiry date (track keywords, dates, signatures and conflicting information)"	Automated Document Verification and Pre-processing	IDP & Data Foundation / Compliance & Anomaly Detection Engine	High	Medium	High
"Automated estimation of costs (regression based on historical data) + detection of non compliant values (string, 0, 1, or illogical value)"	Cost Estimation and Compliance Detection	IDP & Data Foundation / Predictive Analytics & Scenario Modeling	Low	Medium	High
"UNSPSC Lookup with semantic linking: finding the best UNSPSC code for an item with a research based on project context and meaning"	UNSPSC Lookup with Semantic Linking	Intelligent Document Processing (IDP) & Data Foundation	High	Low	Very High
"Scan and extract data from UN agencies LTAs (PDFs) from UNGM to build a fully-fledged and searchable contract repository. Relevant UN agencies' LTAs alongside UNOPS LTAs and other existing contracts are automatically suggested as suggested sourcing option, if relevant matched identified at requisition stage  Streamline search of contracts (POs, other contracts, LTAs, UN agency LTAs, BPAs...) in the repository by leveraging Natural Language Processing"	Contract Repository and Search Optimization	Intelligent Document Processing (IDP) & Data Foundation	Medium	Low	High
"Automatically screen supplier documentation as part of DRiVE to verify questionnaire responses or suggest to suppliers pre filled responses to the questionnaire, based on submitted documents (invovle reshaping DRiVE process, to have first document submission, then a first level of verification done by the suppliers)"	Automated Supplier Documentation Screening for DRiVE	Intelligent Document Processing (IDP) & Data Foundation	Medium	Low	High
"Specification classifier (+ vector DB perhaps) to retrieve the attributes and specs of an item (would then be used for Tender authoring)"	Specification Classifier for Tender Authoring	Intelligent Document Processing (IDP) & Data Foundation	High	Low	Very High
"Suggest relevant UNSPSC codes from natural language text descriptions"	UNSPSC Code Suggestion from Natural Language	Intelligent Document Processing (IDP) & Data Foundation	High	Low	Very High
"Translation capabilities for documents"	Document Translation Capabilities	Intelligent Document Processing (IDP) & Data Foundation	Medium	Low	High
"Automatically screen supplier documents to verify/authenticate diversity status (women-owned, youth-owned, disability-inclusive, MSME)"	Supplier Diversity Status Verification	Intelligent Document Processing (IDP) & Data Foundation	Medium	Low	High
"Linking with Opportunity+ to fetch partner data (feeding into SP consideration for example)."	Partner Data Integration with Opportunity+	Intelligent Document Processing (IDP) & Data Foundation	Low	Low	Medium
"Automatically generate and auto-populate receipt in oneUNOPS based on documentation/proof of delivery submitted by vendor"	Automated Receipt Generation in oneUNOPS	Intelligent Document Processing (IDP) & Data Foundation	Low	Low	Medium
"Automate invoice processing and reconciliation by automatically extracting data from invoices and perform three-way matching (comparing the invoice to the PO and the receipt) for reconciliation. Recognize variations in descriptions and quantities."	Automated Invoice Processing and Reconciliation	Intelligent Document Processing (IDP) & Data Foundation	Medium	Medium	Medium
"Automate initial bid screening by extracting data from bidding documents (including scanned PDFs via OCR) to automatically verify completeness and compliance with tender requirements, flagging non-compliant bids for further review  Automate the verification of bidders' mandatory requirements (incl. legal registrations, certifications and licenses) by extracting this information from submitted documentation"	Automated Bid Screening and Compliance Verification	Intelligent Document Processing (IDP) & Data Foundation	High	Medium	High
"Support auto-bid evaluation by extracting relevant information from bids that can for evaluation based on pre-defined criteria, suppliers can review the extracted data or explain it.  Also, the folders are pre-sorted and labelled by the AI, so the user can already know where to navigate to find information"	AI-Powered Bid Evaluation and Information Sorting	Intelligent Document Processing (IDP) & Data Foundation	High	Medium	High
"Data ingestion module (Entrance of the data pipeline for procurement). Converts language input from requisition into data for all system (UNSPSC, Country, Partner, Priorities, Project ID, Initial recommended method, SDG). This first module generates a first data-driven ""ID card"" for any procurement project facilitating the follow-up, assessment and reporting around of any procurement project"	Data Ingestion Module: Procurement Project ID Card	Intelligent Document Processing (IDP) & Data Foundation	High	High	Medium
"Automatically generate a concise summary of the contract to help parties understand risks, key terms...etc. Enable parties to ask questions about the contract and find relevant information within the contract using natural language queries (e.g.: identify specific terms/clauses)"	Contract Summary and Query Tool	Intelligent Document Processing (IDP) & Data Foundation / Conversational AI & Support	Low	Low	Medium
"Automatically generate lessons learned evaluating the procurement process's effectiveness, outcome achievement and quality of requirements  Learn from past successful tenders (large number of responses, number of successful bidders...) to improve future procurement processes (based on tender details, documentation...etc)"	Procurement Process Evaluation and Improvement	Predictive Analytics & Scenario Modeling	Low	Low	Medium
"Impact Analysis: Before activating a new scoring model, the AI simulates its impact on historical data to report on how it would have affected past supplier scores."	AI Scoring Model Impact Analysis	Predictive Analytics & Scenario Modeling	Low	Low	Medium
"Planning forecasting (ML/DL from similar cases) to help design better procurement planning"	Procurement Planning with ML/DL Forecasting	Predictive Analytics & Scenario Modeling	Medium	Medium	Medium
"Automated DRiVE Score calibration (weighting) based on project context"	Automated DRiVE Score Calibration	Predictive Analytics & Scenario Modeling	Low	Medium	High
"Automatically identify areas for improvement in procurement processes based on lessons learned from CPC reviews"	Procurement Process Improvement	Predictive Analytics & Scenario Modeling	Medium	Medium	Medium
"Analyze submitted bids against tender document to identify potential areas of negotiation (e.g.: pricing, payment terms, service level agreements) and recommend negotiation strategies"	Negotiation Strategy Development	Predictive Analytics & Scenario Modeling	Low	Medium	High
"Conduct complex evaluation/award scenarios: - Conduct award scenario analysis to compare bids and optimize outcomes (e.g., best price per line item, best overall price). - Analyze ""what-if"" scenarios, such as awarding multiple lots to a single supplier for volume discounts, to calculate potential savings and Total Cost of Ownership (TCO) and recommend negotiation strategies"	Complex Evaluation and Award Scenarios Analysis	Predictive Analytics & Scenario Modeling	High	High	Medium
"Scenario testing (TCO, Supply Chain disruption) to support practionners in drafting resilient procurement strategies. This feature could simulate a fulll worklow based on parameters that the user can change"	Scenario Testing for Resilient Procurement Strategies	Predictive Analytics & Scenario Modeling	High	High	Medium
"DRiVE pattern and trends: identify patterns and trends through regression and clusterisation to better prevent and mitigate issues/risks among suppliers"	DRiVE Patterns and Trends Analysis	Predictive Analytics & Scenario Modeling	Medium	High	Low
"Use an ML approach to support the decision-making for RFP (MCDM TOPSIS or MARCOS)"	ML for RFP Decision-Making (MCDM, TOPSIS, MARCOS)	Predictive Analytics & Scenario Modeling	Medium	High	Low
"Automate and streamline the entire purchase requisition intake process by intelligently understanding Purchase Requisitions, suggests existing contracts/LTAs and/or potential suppliers."	Purchase Requisition Automation	Supplier Intelligence & Matching	Medium	Low	High
"Questionnaire Assignment: Beyond simple rules, an AI could analyze a supplier's complete profile to intelligently suggest the most relevant supplemental questionnaire modules."	AI-Powered Questionnaire Assignment	Supplier Intelligence & Matching	Medium	Low	High
"Sustainable Procurement Agent: https://www.kaggle.com/code/marcocondemipolimeni/sustainable-procurement-agent Pull together SPPM data, with SP criteria, country data and Web search to provide granual and adaptive sustainable procurement recommendations"	Sustainable Procurement Agent	Supplier Intelligence &Matching	High	Low	Very High
"Automatically extract key market intelligence from unstructured sourcing response documents"	Market Intelligence Extraction from Sourcing Documents	Supplier Intelligence & Matching	Low	Low	Medium
"Automate supplier performance evaluation and monitoring by tracking and analyzing supplier performance metrics (delivery times, quantity, quality, communication, compliance, cost, questionnaire) over time  Automatically identify recommendations for improvement (incl. capacity development action plans)"	Automated Supplier Performance Evaluation	Supplier Intelligence & Matching	Medium	Medium	Medium
NEW_FEATURE_TITLE	Benchmark Pricing and Cost Analysis	Supplier Intelligence & Matching	Medium	Medium	Medium
"Automatically suggest potential suppliers to invite to tender that have history of supplying the requirement or able to supply the requirement based on match between supplier data/information and tender requirements (e.g.: UNSPSC codes and other criteria)  For Emergency Procurement, automatically suggest potential suppliers based on historical procurement history, EPP experience etc.."	Supplier Suggestion for Tendering and Emergency Procurement	Supplier Intelligence & Matching	High	High	Medium
"Analyze large, diverse datasets of supplier data (internal, external and unstructured) to establish 360-degree views of supplier profiles and risk scorecards in real-time, including capabilities, certifications, financial stability, eligibility, sustainability and past performance, as well as predicting potential risks by screening external sources of information (news...)  Identify and flag repeated supplier defaulters (e.g: those not responding to questionnaires promptly), low-performing suppliers.. .etc"	Supplier Data Analysis and Risk Management	Supplier Intelligence & Matching	Medium	High	Low
"Streamline the supplier search process by leveraging Natural Language Processing (NLP)  Analyze large databases of suppliers (internal and external) + web to identify potential suppliers/suppliers of interest matching specific criteria (e.g.: commodity, geographical location, certifications, sustainability ratings, financial stability, past-performance) + market maturity (linking to DRiVE)"	AI-Powered Supplier Search Optimization	Supplier Intelligence & Matching	High	High	Medium`;

        // --- Helper function to parse the TSV data ---
        function parseData(tsv) {
            const features = [];
            const lines = tsv.trim().split('\n');
            const headers = lines[0].split('\t').map(h => h.trim());
            
            // Find header indices
            const descIndex = headers.indexOf('Description');
            const titleIndex = headers.indexOf('Title');
            const macroIndex = headers.indexOf('Macro');
            const impactIndex = headers.indexOf('Impact');
            const complexityIndex = headers.indexOf('Complexity');
            const prioIndex = headers.indexOf('Prioritization');

            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split('\t');
                if (values.length === headers.length) {
                    // Clean quotes and newlines from description
                    let description = values[descIndex] ? values[descIndex].trim() : 'No description';
                    if (description.startsWith('"') && description.endsWith('"')) {
                        description = description.substring(1, description.length - 1);
                    }
                    description = description.replace(/""/g, '"').replace(/  /g, ' '); // Fix double quotes and extra spaces

                    features.push({
                        Description: description,
                        Title: values[titleIndex] ? values[titleIndex].trim() : 'Untitled',
                        Macro: values[macroIndex] ? values[macroIndex].trim() : 'Uncategorized',
                        Impact: values[impactIndex] ? values[impactIndex].trim() : 'Medium',
                        Complexity: values[complexityIndex] ? values[complexityIndex].trim() : 'Medium',
                        Prioritization: values[prioIndex] ? values[prioIndex].trim() : 'Medium'
                    });
                }
            }
            return features;
        }

        // --- All features parsed from raw data ---
        const allFeatures = parseData(rawData);

        // --- Definitions for 3x3 Matrix ---
        const matrixImpactGroups = ['High', 'Medium', 'Low']; // Rows
        const matrixComplexityGroups = ['Low', 'Medium', 'High']; // Columns

        // --- Definitions for Detailed List ---
        // Use the exact order you provided
        const macroRenderOrder = [
            "Agentic AI & Workflow Automation",
            "Compliance & Anomaly Detection Engine",
            "Conversational AI & Support",
            "Generative AI Content Assistant",
            "Intelligent Document Processing (IDP) & Data Foundation", // This is the consolidated group
            "Predictive Analytics & Scenario Modeling",
            "Supplier Intelligence & Matching"
        ];
        
        // This maps all variations to the single group name
        const macroNameMap = {
            "Agentic AI & Workflow Automation": "Agentic AI & Workflow Automation",
            "Compliance & Anomaly Detection Engine": "Compliance & Anomaly Detection Engine",
            "Conversational AI & Support": "Conversational AI & Support",
            "Generative AI Content Assistant": "Generative AI Content Assistant",
            "IDP & Data Foundation / Agentic AI & Workflow Automation": "Intelligent Document Processing (IDP) & Data Foundation",
            "IDP & Data Foundation / Compliance & Anomaly Detection Engine": "Intelligent Document Processing (IDP) & Data Foundation",
            "IDP & Data Foundation / Predictive Analytics & Scenario Modeling": "Intelligent Document Processing (IDP) & Data Foundation",
            "Intelligent Document Processing (IDP) & Data Foundation": "Intelligent Document Processing (IDP) & Data Foundation",
            "Intelligent Document Processing (IDP) & Data Foundation / Conversational AI & Support": "Intelligent Document Processing (IDP) & Data Foundation",
            "Predictive Analytics & Scenario Modeling": "Predictive Analytics & Scenario Modeling",
            "Supplier Intelligence & Matching": "Supplier Intelligence & Matching",
            "Supplier Intelligence &Matching": "Supplier Intelligence & Matching" // Fix typo from data
        };

        // --- Added Icons for Macros ---
        const macroIcons = {
            "Agentic AI & Workflow Automation": "🤖",
            "Compliance & Anomaly Detection Engine": "🛡️",
            "Conversational AI & Support": "💬",
            "Generative AI Content Assistant": "✨",
            "Intelligent Document Processing (IDP) & Data Foundation": "📄",
            "Predictive Analytics & Scenario Modeling": "📈",
            "Supplier Intelligence & Matching": "🎯"
        };


        const priorityOrder = ["Very High", "High", "Medium", "Low"];
        
        // --- Shared Priority Styles (for Detailed List) ---
        // --- Added Icons for Priorities ---
        const priorityStyles = {
            "Very High": { text: "text-emerald-700", border: "border-emerald-200", bg: "bg-emerald-50", icon: "🚀" },
            "High": { text: "text-blue-700", border: "border-blue-200", bg: "bg-blue-50", icon: "🔥" },
            "Medium": { text: "text-amber-700", border: "border-amber-200", bg: "bg-amber-50", icon: "⚙️" },
            "Low": { text: "text-slate-600", border: "border-slate-200", bg: "bg-slate-50", icon: "⏳" }
        };

        // --- Styles for 3x3 Impact/Complexity Matrix ---
        // Using your requested color scheme AND new corporate wording
        const matrixStyles = {
            // High Impact
            'High-Low': { bg: 'bg-blue-100', titleColor: 'text-blue-800', label: 'Execute & Prioritize' },
            'High-Medium': { bg: 'bg-green-100', titleColor: 'text-green-800', label: 'Strategic Investments' },
            'High-High': { bg: 'bg-yellow-100', titleColor: 'text-yellow-800', label: 'Major Transformations' },
            // Medium Impact
            'Medium-Low': { bg: 'bg-green-100', titleColor: 'text-green-800', label: 'Quick Wins' },
            'Medium-Medium': { bg: 'bg-yellow-100', titleColor: 'text-yellow-800', label: 'Roadmap Candidates' },
            'Medium-High': { bg: 'bg-orange-100', titleColor: 'text-orange-800', label: 'Re-assess Scope' },
            // Low Impact
            'Low-Low': { bg: 'bg-yellow-100', titleColor: 'text-yellow-800', label: 'Incremental Gains' },
            'Low-Medium': { bg: 'bg-orange-100', titleColor: 'text-orange-800', label: 'Queue for Review' },
            'Low-High': { bg: 'bg-red-100', titleColor: 'text-red-800', label: 'Deprioritize' },
        };

        // --- Group data for 3x3 Matrix ---
        function groupForImpactMatrix(features) {
            const matrix = {}; // Key format: "Impact-Complexity"
            for (const impact of matrixImpactGroups) {
                for (const complexity of matrixComplexityGroups) {
                    matrix[`${impact}-${complexity}`] = [];
                }
            }

            for (const feature of features) {
                const key = `${feature.Impact}-${feature.Complexity}`;
                if (matrix[key]) {
                    // Store the *full feature object* instead of just the title
                    matrix[key].push(feature); 
                }
            }
            return matrix;
        }

        // --- Group data for Macro List ---
        function groupForMacroList(features) {
            const grouped = {};
            
            // Initialize groups based on the desired render order
            for (const macroName of macroRenderOrder) {
                grouped[macroName] = {};
                for (const prio of priorityOrder) {
                    grouped[macroName][prio] = [];
                }
            }

            // Populate groups
            for (const feature of features) {
                const mappedMacroName = macroNameMap[feature.Macro] || null;

                if (mappedMacroName && grouped[mappedMacroName]) {
                    if (grouped[mappedMacroName][feature.Prioritization]) {
                        grouped[mappedMacroName][feature.Prioritization].push(feature);
                    }
                } else {
                    console.warn(`Unmapped macro: ${feature.Macro}`);
                }
            }
            return grouped;
        }


        // --- Render function for 3x3 Matrix ---
        function buildImpactMatrix(matrixData) {
            const headContainer = document.getElementById('impact-matrix-head');
            const bodyContainer = document.getElementById('impact-matrix-body');

            // 1. Build Header
            let headerHtml = '<tr><th class="p-4 w-1/4"></th>'; // Empty corner
            for (const complexity of matrixComplexityGroups) {
                headerHtml += `<th class="p-4 text-left text-sm font-bold text-slate-700 uppercase tracking-wider">${complexity} Complexity</th>`;
            }
            headerHtml += '</tr>';
            headContainer.innerHTML = headerHtml;

            // 2. Build Body Rows
            for (const impact of matrixImpactGroups) {
                const row = document.createElement('tr');
                
                // First cell is the Impact label
                const labelCell = document.createElement('th');
                labelCell.className = "p-4 text-left text-sm font-bold text-slate-700 uppercase tracking-wider align-top bg-slate-100";
                labelCell.scope = "row";
                labelCell.innerHTML = `${impact} Impact`;
                row.appendChild(labelCell);

                // Subsequent cells are the quadrants
                for (const complexity of matrixComplexityGroups) {
                    const key = `${impact}-${complexity}`;
                    const featuresInQuad = matrixData[key] || [];
                    const styles = matrixStyles[key];

                    const cell = document.createElement('td');
                    // Added cursor-pointer and hover effect
                    cell.className = `p-4 align-top w-1/4 h-48 relative matrix-tile ${styles.bg} cursor-pointer hover:opacity-90 transition-opacity`;
                    
                    const count = featuresInQuad.length;
                    
                    // Attach click event listener to the cell
                    cell.addEventListener('click', () => {
                        showModal(styles.label, featuresInQuad);
                    });

                    cell.innerHTML = `
                        <div class="flex flex-col h-full">
                            <div class="flex-shrink-0">
                                <span class="font-bold text-sm ${styles.titleColor}">${styles.label}</span>
                                <span class="block text-3xl font-bold ${styles.titleColor} mt-1">${count}</span>
                                <span class="text-sm ${styles.titleColor} opacity-80">Feature${count !== 1 ? 's' : ''}</span>
                            </div>
                            <!-- Tooltip Bubble (No hover on matrix) -->
                        </div>
                    `;
                    row.appendChild(cell);
                }
                bodyContainer.appendChild(row);
            }
        }

        // --- Render function for Macro List ---
        function buildMacroList(groupedData) {
            const container = document.getElementById('macro-list-container');
            container.innerHTML = ''; // Clear previous content

            for (const macroName of macroRenderOrder) {
                const priorities = groupedData[macroName];
                if (!priorities) continue;

                // Check if there are any features in this macro group
                const totalFeatures = Object.values(priorities).reduce((sum, list) => sum + list.length, 0);
                if (totalFeatures === 0) continue; // Skip empty macros

                const macroBox = document.createElement('div');
                macroBox.className = 'bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex flex-col';
                
                // Macro Title - Updated with Icon
                const title = document.createElement('h3');
                title.className = 'text-base font-semibold text-slate-800 border-b border-slate-200 pb-2 mb-3';
                const icon = macroIcons[macroName] || '📂'; // Get icon or default
                title.innerHTML = `${icon} ${macroName}`;
                macroBox.appendChild(title);

                // Add features grouped by priority
                for (const prio of priorityOrder) {
                    const features = priorities[prio];
                    if (features.length > 0) {
                        const priorityGroup = document.createElement('div');
                        priorityGroup.className = 'mb-3';

                        // Priority Label - Updated with Icon
                        const prioLabel = document.createElement('span');
                        const styles = priorityStyles[prio];
                        prioLabel.className = `inline-block text-xs font-medium px-2 py-0.5 rounded-full ${styles.bg} ${styles.text} ${styles.border} mb-2`;
                        prioLabel.innerHTML = `${styles.icon} ${prio}`;
                        priorityGroup.appendChild(prioLabel);

                        const ul = document.createElement('ul');
                        ul.className = 'list-disc space-y-2 pl-2'; // Added pl-2
                        
                        for (const feature of features) {
                             const li = document.createElement('li');
                            // Add new class for relative positioning
                            li.className = 'feature-item text-sm text-slate-800 leading-snug';

                            // 1. Create the text span (for truncation)
                            const textSpan = document.createElement('span');
                            textSpan.className = 'feature-text';
                            textSpan.textContent = feature.Title; // Use SHORT title
                            li.appendChild(textSpan);

                            // 2. Create the tooltip element
                            const tooltip = document.createElement('div');
                            tooltip.className = 'feature-tooltip';
                            tooltip.textContent = feature.Description; // Use LONG description
                            li.appendChild(tooltip); // Add tooltip to li
                            
                            ul.appendChild(li);
                        }
                        priorityGroup.appendChild(ul);
                        macroBox.appendChild(priorityGroup);
                    }
                }
                container.appendChild(macroBox);
            }
        }


        // --- Modal Functions ---
        const modal = document.getElementById('feature-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalList = document.getElementById('modal-list');
        const closeModalBtn = document.getElementById('modal-close-btn');

        /**
         * Shows the feature list modal
         * @param {string} title - The title for the modal (e.g., "Execute & Prioritize")
         * @param {Array<Object>} features - The array of feature objects
         */
        function showModal(title, features) {
            // Set title
            modalTitle.textContent = title;

            // Clear previous list
            modalList.innerHTML = '';

            // Populate list
            if (features.length > 0) {
                for (const feature of features) {
                    const li = document.createElement('li');
                    li.className = 'py-3 border-b border-slate-200 last:border-b-0';
                    li.innerHTML = `
                        <strong class="block text-slate-800 font-semibold">${feature.Title}</strong>
                        <p class="text-sm text-slate-600 mt-1">${feature.Description}</p>
                    `;
                    modalList.appendChild(li);
                }
            } else {
                modalList.innerHTML = `<li class="text-slate-500">No features in this category.</li>`;
            }

            // Show modal
            modal.classList.add('modal-open');
        }

        /**
         * Hides the feature list modal
         */
        function hideModal() {
            modal.classList.remove('modal-open');
            // Clear list for next time
            modalList.innerHTML = '';
            modalTitle.textContent = '';
        }


        // --- Main ---
        document.addEventListener('DOMContentLoaded', () => {
            // 1. Build and Render 3x3 Matrix
            const matrixData = groupForImpactMatrix(allFeatures);
            buildImpactMatrix(matrixData);

            // 2. Build and Render Macro List
            const macroListData = groupForMacroList(allFeatures);
            buildMacroList(macroListData);

            // 3. Setup Modal Close Events
            closeModalBtn.addEventListener('click', hideModal);
            modal.addEventListener('click', (e) => {
                // Check if the click is on the overlay itself (not the content)
                if (e.target === modal) {
                    hideModal();
                }
            });
        });
    </script>
</body>
</html>

